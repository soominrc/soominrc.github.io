<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Public Archive</title>
  <meta name="description" content="A non-linear archive about access, redaction, and what systems choose to show." />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,300;0,400;0,500;1,300;1,400&family=IBM+Plex+Mono:ital,wght@0,300;0,400;0,500;1,300&family=Karla:wght@300;400;500&display=swap" rel="stylesheet" />

  <style>
    :root{
      --bg:#0c0b09;
      --surface:#111009;
      --border:rgba(224,218,204,0.08);
      --border-mid:rgba(224,218,204,0.13);
      --border-strong:rgba(224,218,204,0.22);
      --ink:#e0dac8;
      --ink-mid:rgba(224,218,204,0.55);
      --ink-dim:rgba(224,218,204,0.32);
      --ink-ghost:rgba(224,218,204,0.18);

      --paper:#f4f1ea;
      --doc-ink:#1a1814;
      --doc-mid:rgba(26,24,20,0.58);
      --doc-dim:rgba(26,24,20,0.36);
      --redact:#1a1814;

      --amber:#c8a84a;
      --green:#5a9e6a;
      --shadow:0 32px 80px rgba(0,0,0,0.65), 0 4px 12px rgba(0,0,0,0.30);
    }

    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}

    body{
      background:var(--bg);
      color:var(--ink);
      font-family:'Karla',sans-serif;
      font-weight:400;
      min-height:100vh;
      overflow-x:hidden;
      -webkit-font-smoothing:antialiased;
    }

    body::before{
      content:'';
      position:fixed;inset:0;
      background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.035'/%3E%3C/svg%3E");
      background-repeat:repeat;
      background-size:200px 200px;
      pointer-events:none;
      z-index:9999;
      opacity:0.5;
    }

    .stage{
      min-height:100vh;
      display:grid;
      grid-template-rows:auto 1fr auto;
      padding:16px clamp(12px,2.5vw,28px);
      gap:10px;
    }
    .topline{
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    .topline-title{
      font-family:'IBM Plex Mono',monospace;
      font-size:9.5px;
      font-weight:400;
      letter-spacing:0.22em;
      text-transform:uppercase;
      color:var(--ink-dim);
    }
    .topline-right{
      font-family:'IBM Plex Mono',monospace;
      font-size:9px;
      letter-spacing:0.14em;
      text-transform:uppercase;
      color:var(--ink-ghost);
    }
    .center{display:grid;place-items:start center;}

    .window{
      width:min(1080px,100%);
      border:1px solid var(--border);
      border-radius:11px;
      background:var(--surface);
      box-shadow:var(--shadow);
      overflow:hidden;
      display:grid;
      grid-template-rows:auto minmax(0,1fr);
    }
    .window.is-minimized .content{display:none;}
    .window.is-fullscreen{
      position:fixed;inset:8px;
      width:auto;height:auto;
      z-index:200;border-radius:10px;
    }

    .chrome{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:10px 14px;
      border-bottom:1px solid var(--border);
      background:var(--bg);
      user-select:none;
    }
    .dots{display:flex;gap:7px;align-items:center;}
    .dotbtn{
      width:11px;height:11px;border-radius:50%;
      border:none;cursor:pointer;padding:0;
      transition:filter 0.12s,transform 0.10s;
    }
    .dotbtn:hover{filter:brightness(1.18);transform:scale(1.08);}
    .dotbtn.red{background:#ff5f56;}
    .dotbtn.yellow{background:#ffbd2e;}
    .dotbtn.green{background:#27c93f;}

    .url-bar{
      flex:1;
      text-align:center;
      font-family:'IBM Plex Mono',monospace;
      font-size:9.5px;
      font-weight:300;
      letter-spacing:0.12em;
      text-transform:uppercase;
      color:var(--ink-ghost);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .chrome-right{display:flex;gap:5px;align-items:center;}
    .icon-btn{
      font-family:'IBM Plex Mono',monospace;
      font-size:11px;
      width:26px;height:26px;
      display:grid;place-items:center;
      border:1px solid var(--border);
      background:transparent;
      color:var(--ink-dim);
      cursor:pointer;
      border-radius:5px;
      text-decoration:none;
      transition:background 0.14s,color 0.14s,border-color 0.14s;
    }
    .icon-btn:hover{background:rgba(224,218,204,0.05);color:var(--ink);border-color:var(--border-mid);}

    .content{
      min-height:0;
      overflow-y:auto;
      overflow-x:hidden;
      scrollbar-width:thin;
      scrollbar-color:rgba(224,218,204,0.09) transparent;
    }

    /* Routing */
    #record,#about{display:none;}
    .content:has(#record:target) #landing,
    .content:has(#about:target)  #landing{display:none;}
    #record:target,#about:target{display:block;}

    /* LANDING */
    .landing-wrap{
      padding:22px;
      display:grid;
      grid-template-columns:1fr 1.6fr;
      gap:14px;
      align-items:stretch;
    }
    .landing-left{display:flex;flex-direction:column;gap:12px;}
    .landing-hero{
      border:1px solid var(--border);
      border-radius:8px;
      background:rgba(255,255,255,0.010);
      padding:22px 24px;
      flex:1;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      min-height:240px;
    }
    .landing-overline{
      font-family:'IBM Plex Mono',monospace;
      font-size:9px;
      font-weight:300;
      letter-spacing:0.22em;
      text-transform:uppercase;
      color:var(--ink-ghost);
      margin-bottom:16px;
    }
    .landing-title{
      font-family:'Spectral',serif;
      font-size:clamp(30px,4vw,46px);
      font-weight:300;
      line-height:1.04;
      letter-spacing:-0.02em;
      color:var(--ink);
      margin-bottom:18px;
    }
    .landing-body{
      font-size:13px;
      line-height:1.78;
      color:var(--ink-mid);
      max-width:44ch;
      font-weight:300;
    }
    .landing-meta{
      margin-top:20px;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .landing-meta-row{
      font-family:'IBM Plex Mono',monospace;
      font-size:9px;
      font-weight:300;
      letter-spacing:0.12em;
      text-transform:uppercase;
      color:var(--ink-ghost);
      display:flex;
      gap:8px;
    }
    .landing-meta-row span:first-child{color:var(--ink-dim);}

    .index-list{
      border:1px solid var(--border);
      border-radius:8px;
      overflow:hidden;
    }
    .index-list-head{
      padding:8px 14px;
      border-bottom:1px solid var(--border);
      font-family:'IBM Plex Mono',monospace;
      font-size:9px;
      font-weight:300;
      letter-spacing:0.18em;
      text-transform:uppercase;
      color:var(--ink-ghost);
      background:rgba(255,255,255,0.006);
    }
    .index-row{
      display:flex;
      align-items:center;
      gap:12px;
      padding:13px 14px;
      border-bottom:1px solid var(--border);
      cursor:pointer;
      text-decoration:none;
      transition:background 0.14s;
    }
    .index-row:last-child{border-bottom:none;}
    .index-row:hover{background:rgba(224,218,204,0.04);}
    .index-row-id{
      font-family:'IBM Plex Mono',monospace;
      font-size:9.5px;
      font-weight:400;
      color:rgba(224,218,204,0.28);
      width:14px;
      flex-shrink:0;
    }
    .index-row-body{flex:1;}
    .index-row-title{
      font-size:12.5px;
      font-weight:500;
      color:var(--ink);
      margin-bottom:2px;
    }
    .index-row-meta{
      font-family:'IBM Plex Mono',monospace;
      font-size:8.5px;
      font-weight:300;
      letter-spacing:0.06em;
      color:var(--ink-ghost);
    }
    .index-row-arrow{
      font-size:11px;
      color:var(--ink-ghost);
      transition:transform 0.14s,color 0.14s;
    }
    .index-row:hover .index-row-arrow{transform:translateX(3px);color:var(--ink-dim);}

    .file-panel{
      border:1px solid var(--border);
      border-radius:8px;
      overflow:hidden;
      display:grid;
      grid-template-rows:auto 1fr auto;
      background:rgba(255,255,255,0.010);
    }
    .file-panel-bar{
      padding:9px 14px;
      border-bottom:1px solid var(--border);
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-family:'IBM Plex Mono',monospace;
      font-size:9px;
      font-weight:300;
      letter-spacing:0.14em;
      text-transform:uppercase;
      color:var(--ink-ghost);
    }
    .file-field{
      position:relative;
      min-height:300px;
      background:radial-gradient(500px 300px at 50% 46%, rgba(224,218,204,0.022), transparent 70%);
      overflow:hidden;
      padding:14px;
    }

    .files{
      height:100%;
      display:grid;
      grid-template-columns:repeat(12,minmax(0,1fr));
      grid-auto-rows:34px;
      gap:10px 8px;
      align-content:start;
      justify-items:center;
    }

    .file{
      width:40px;height:32px;
      position:relative;cursor:pointer;
      filter:drop-shadow(0 7px 12px rgba(0,0,0,0.40));
      transition:transform 0.14s ease,filter 0.14s ease,opacity 0.28s ease;
      text-decoration:none;outline:none;
    }
    .file:hover{
      transform:translateY(-2px);
      filter:drop-shadow(0 12px 20px rgba(0,0,0,0.55)) brightness(1.06);
    }
    .file:active{transform:scale(0.97);}
    .file::before{
      content:'';
      position:absolute;
      left:0;right:0;top:6px;bottom:0;
      border-radius:6px;
      background:linear-gradient(180deg,#dcdad4,#c8c5be);
      border:1px solid rgba(0,0,0,0.16);
      box-shadow:inset 0 1px 0 rgba(255,255,255,0.50);
    }
    .file::after{
      content:'';
      position:absolute;
      left:4px;top:1px;width:16px;height:8px;
      border-radius:5px 5px 3px 3px;
      background:linear-gradient(180deg,rgba(255,255,255,0.62),rgba(255,255,255,0.28));
      border:1px solid rgba(0,0,0,0.09);
    }
    .file.visited{
      opacity:0.28;
      filter:grayscale(1) drop-shadow(0 4px 7px rgba(0,0,0,0.28));
    }

    .file-panel-footer{
      padding:9px 14px;
      border-top:1px solid var(--border);
      font-family:'IBM Plex Mono',monospace;
      font-size:9px;
      font-weight:300;
      letter-spacing:0.12em;
      text-transform:uppercase;
      color:var(--ink-ghost);
      display:flex;
      justify-content:space-between;
    }

    .record-wrap{padding:18px 22px 40px;}
    .top-bar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:14px;
      flex-wrap:wrap;
    }
    .top-bar-left{display:flex;align-items:center;gap:8px;flex-wrap:wrap;}
    .nav-btn{
      font-family:'IBM Plex Mono',monospace;
      font-size:9.5px;
      font-weight:300;
      letter-spacing:0.12em;
      text-transform:uppercase;
      color:var(--ink-dim);
      border:1px solid var(--border);
      background:transparent;
      padding:7px 11px;
      border-radius:6px;
      cursor:pointer;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      transition:background 0.14s,color 0.14s,border-color 0.14s;
    }
    .nav-btn:hover{background:rgba(224,218,204,0.05);color:var(--ink);border-color:var(--border-mid);}

    .record-tabs{
      display:flex;
      gap:2px;
      border:1px solid var(--border);
      border-radius:6px;
      padding:3px;
    }
    .record-tab{
      font-family:'IBM Plex Mono',monospace;
      font-size:9.5px;
      font-weight:400;
      letter-spacing:0.10em;
      text-transform:uppercase;
      color:var(--ink-ghost);
      border:none;
      background:transparent;
      padding:5px 11px;
      border-radius:4px;
      cursor:pointer;
      transition:background 0.14s,color 0.14s;
    }
    .record-tab:hover{color:var(--ink-mid);}
    .record-tab.active{background:rgba(224,218,204,0.10);color:var(--ink);}

    .request-section{margin-bottom:14px;}
    .request-card{
      border:1px solid var(--border);
      border-radius:8px;
      background:rgba(255,255,255,0.008);
      overflow:hidden;
    }
    .request-card-head{
      padding:10px 14px;
      border-bottom:1px solid var(--border);
      display:flex;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
      gap:6px;
    }
    .request-card-title{
      font-family:'IBM Plex Mono',monospace;
      font-size:9px;
      font-weight:400;
      letter-spacing:0.22em;
      text-transform:uppercase;
      color:var(--ink-dim);
    }
    .request-hint{
      font-family:'IBM Plex Mono',monospace;
      font-size:8.5px;
      font-weight:300;
      letter-spacing:0.10em;
      color:var(--ink-ghost);
      font-style:italic;
    }
    .request-card-body{
      padding:14px 16px;
      display:flex;
      align-items:center;
      gap:16px;
      flex-wrap:wrap;
    }
    .req-step{display:flex;align-items:center;gap:9px;}
    .req-step-num{
      font-family:'IBM Plex Mono',monospace;
      font-size:9px;
      font-weight:300;
      width:18px;height:18px;
      border-radius:50%;
      border:1px solid var(--border-mid);
      display:grid;
      place-items:center;
      color:var(--ink-ghost);
      flex-shrink:0;
    }
    .req-step-num.done{border-color:var(--green);color:var(--green);}
    .req-divider{width:1px;height:24px;background:var(--border);flex-shrink:0;}
    .req-check-wrap{display:flex;align-items:center;gap:8px;cursor:pointer;}
    .req-check-wrap input[type="checkbox"]{width:14px;height:14px;accent-color:var(--green);cursor:pointer;flex-shrink:0;}
    .req-check-label{
      font-family:'IBM Plex Mono',monospace;
      font-size:9px;
      font-weight:300;
      letter-spacing:0.14em;
      text-transform:uppercase;
      color:var(--ink-dim);
      cursor:pointer;
      white-space:nowrap;
      user-select:none;
    }
    .req-input-wrap{display:flex;align-items:center;gap:6px;flex:1;min-width:180px;}
    .req-input{
      font-family:'IBM Plex Mono',monospace;
      font-size:10px;
      font-weight:300;
      letter-spacing:0.08em;
      border:1px solid var(--border);
      background:rgba(255,255,255,0.020);
      color:var(--ink);
      border-radius:5px;
      padding:7px 10px;
      outline:none;
      flex:1;
      transition:border-color 0.14s,background 0.14s;
    }
    .req-input:focus{border-color:var(--border-strong);background:rgba(255,255,255,0.030);}
    .req-input::placeholder{color:rgba(224,218,204,0.16);}
    .req-input.valid{border-color:rgba(90,158,106,0.5);}
    .req-submit{
      font-family:'IBM Plex Mono',monospace;
      font-size:9.5px;
      font-weight:400;
      letter-spacing:0.12em;
      text-transform:uppercase;
      color:var(--ink);
      border:1px solid rgba(224,218,204,0.18);
      background:rgba(224,218,204,0.05);
      padding:7px 13px;
      border-radius:5px;
      cursor:pointer;
      white-space:nowrap;
      transition:background 0.14s,border-color 0.14s,transform 0.10s;
      flex-shrink:0;
    }
    .req-submit:hover:not(:disabled){background:rgba(224,218,204,0.10);border-color:rgba(224,218,204,0.32);}
    .req-submit:active:not(:disabled){transform:scale(0.98);}
    .req-submit:disabled{opacity:0.25;cursor:not-allowed;}

    .status-line{
      width:min(960px,100%);
      margin:0 auto 12px;
      height:24px;
      display:flex;
      align-items:center;
      gap:9px;
      padding:0 2px;
    }
    .status-dot{
      width:6px;height:6px;border-radius:50%;
      background:rgba(224,218,204,0.12);
      flex-shrink:0;
      transition:background 0.35s,box-shadow 0.35s;
    }
    .status-dot.processing{
      background:var(--amber);
      box-shadow:0 0 8px rgba(200,168,74,0.50);
      animation:blink 1s ease infinite;
    }
    .status-dot.granted{
      background:var(--green);
      box-shadow:0 0 8px rgba(90,158,106,0.45);
    }
    @keyframes blink{0%,100%{opacity:1}50%{opacity:0.30}}
    .status-msg{
      font-family:'IBM Plex Mono',monospace;
      font-size:9px;
      font-weight:300;
      letter-spacing:0.14em;
      text-transform:uppercase;
      color:var(--ink-ghost);
      transition:color 0.35s;
    }
    .status-line.processing .status-msg{color:var(--amber);}
    .status-line.granted .status-msg{color:var(--green);}

    /* PAPER */
    .paper{
      width:min(960px,100%);
      margin:0 auto;
      background:var(--paper);
      border:1px solid rgba(0,0,0,0.08);
      border-radius:9px;
      overflow:hidden;
      box-shadow:0 20px 60px rgba(0,0,0,0.28), 0 3px 9px rgba(0,0,0,0.10), inset 0 1px 0 rgba(255,255,255,0.55);
      position:relative;
    }

    .fold-toggle{
      position:absolute;left:-9999px;
      width:1px;height:1px;overflow:hidden;
    }
    .page-fold{
      position:absolute;top:0;right:0;
      width:52px;height:52px;
      cursor:pointer;z-index:20;
    }
    .page-fold::after{
      content:'';
      position:absolute;inset:0;
      background:linear-gradient(225deg,transparent 0%,transparent 47%,rgba(220,216,208,0.95) 50%,rgba(240,236,228,0.55) 62%,transparent 100%);
      filter:drop-shadow(-2px 2px 3px rgba(0,0,0,0.10));
      transition:opacity 0.18s ease,transform 0.18s ease;
      pointer-events:none;
    }
    .page-fold:hover::after{opacity:0.72;}
    .fold-toggle:checked + .page-fold::after{opacity:0.62;transform:translate(-3px,3px);}

    .paper-inner{padding:28px 30px 36px;position:relative;}

    .paper-stamp{
      position:absolute;
      top:24px;right:28px;
      font-family:'IBM Plex Mono',monospace;
      font-size:8px;
      font-weight:400;
      letter-spacing:0.24em;
      text-transform:uppercase;
      color:rgba(26,24,20,0.20);
      border:1px solid rgba(26,24,20,0.15);
      padding:3px 7px;
      border-radius:2px;
      transform:rotate(1.8deg);
      user-select:none;
      pointer-events:none;
      transition:color 0.5s,border-color 0.5s;
    }
    .paper-stamp.released{color:rgba(55,105,55,0.44);border-color:rgba(55,105,55,0.26);}
    .paper-stamp.override{color:rgba(140,80,40,0.40);border-color:rgba(140,80,40,0.22);}

    .doc-header{
      padding-bottom:18px;
      border-bottom:1px solid rgba(26,24,20,0.09);
      margin-bottom:22px;
      padding-right:100px;
    }
    .doc-kicker{
      font-family:'IBM Plex Mono',monospace;
      font-size:8.5px;
      font-weight:300;
      letter-spacing:0.20em;
      text-transform:uppercase;
      color:var(--doc-dim);
      margin-bottom:10px;
    }
    .doc-title{
      font-family:'Spectral',serif;
      font-size:clamp(21px,2.8vw,28px);
      font-weight:300;
      line-height:1.12;
      letter-spacing:-0.02em;
      color:var(--doc-ink);
      margin-bottom:8px;
    }
    .doc-subtitle{
      font-size:12px;
      line-height:1.6;
      color:var(--doc-mid);
      font-family:'Spectral',serif;
      font-style:italic;
      font-weight:300;
    }

    .doc{
      color:var(--doc-ink);
      font-family:'Karla',sans-serif;
      font-size:14px;
      line-height:1.90;
      font-weight:400;
      max-width:78ch;
      overflow-wrap:anywhere;
      word-break:normal;
    }
    .doc p{margin:0 0 14px;}
    .section-head{
      font-family:'IBM Plex Mono',monospace;
      font-size:8px;
      font-weight:400;
      letter-spacing:0.22em;
      text-transform:uppercase;
      color:var(--doc-dim);
      padding-bottom:7px;
      border-bottom:1px solid rgba(26,24,20,0.07);
      margin:26px 0 13px;
    }
    .hanging{padding-left:1.5em;text-indent:-1.5em;}

    .xref{
      font-family:'IBM Plex Mono',monospace;
      font-size:10.5px;
      font-weight:300;
      letter-spacing:0.04em;
      color:var(--doc-mid);
      text-decoration:none;
      border-bottom:1px solid rgba(26,24,20,0.20);
      padding-bottom:1px;
      transition:color 0.14s,border-color 0.14s;
      white-space:nowrap;
    }
    .xref:hover{color:var(--doc-ink);border-bottom-color:rgba(26,24,20,0.50);}
    .xref-row{
      margin-top:22px;
      padding-top:13px;
      border-top:1px solid rgba(26,24,20,0.07);
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }
    .xref-row-label{
      font-family:'IBM Plex Mono',monospace;
      font-size:8px;
      font-weight:300;
      letter-spacing:0.18em;
      text-transform:uppercase;
      color:var(--doc-dim);
    }

    .source-row{
      margin-top:20px;
      padding-top:14px;
      border-top:1px solid rgba(26,24,20,0.08);
      display:flex;
      gap:10px;
      align-items:center;
    }
    .source-label{
      font-family:'IBM Plex Mono',monospace;
      font-size:8.5px;
      font-weight:300;
      letter-spacing:0.14em;
      text-transform:uppercase;
      color:var(--doc-dim);
    }
    .source-link{
      font-family:'IBM Plex Mono',monospace;
      font-size:10.5px;
      font-weight:300;
      color:var(--doc-mid);
      text-decoration:underline;
      text-underline-offset:3px;
    }
    .source-link:hover{color:var(--doc-ink);}


    .redact{
      display:inline;
      background:var(--redact);
      border-radius:2px;
      padding:0 0.10em;
      -webkit-box-decoration-break:clone;
      box-decoration-break:clone;
      cursor:default;
    }
    .redact .redact-text{
      color:transparent;
      transition:color 0.30s ease;
    }
    .paper.is-granted .redact{cursor:pointer;}
    .paper.is-granted .redact:hover{filter:brightness(1.03);}

    .redact.revealed{
      background:transparent;
      padding:0;
    }
    .redact.revealed .redact-text{
      color:rgba(26,24,20,0.92);
    }

    .block-redact{
      display:block;
      margin:0 0 14px;
      padding:0.34em 0.50em;
      background:var(--redact);
      border-left:3px solid rgba(0,0,0,0.22);
      border-radius:0 2px 2px 0;
      cursor:default;
      transition:background 0.22s ease, border-color 0.22s ease;
    }
    .block-redact span{
      color:transparent;
      transition:color 0.30s ease;
      display:block;
    }
    .paper.is-granted .block-redact{cursor:pointer;}
    .paper.is-granted .block-redact:hover{filter:brightness(1.03);}

    .block-redact.revealed{
      background:transparent;
      border-left-color:rgba(0,0,0,0.10);
    }
    .block-redact.revealed span{color:rgba(26,24,20,0.92);}

    .paper-redact-hint{
      display:none;
      position:absolute;
      bottom:12px;left:30px;
      font-family:'IBM Plex Mono',monospace;
      font-size:8.5px;
      font-weight:300;
      letter-spacing:0.16em;
      text-transform:uppercase;
      color:rgba(26,24,20,0.30);
      pointer-events:none;
      user-select:none;
    }
    .paper:not(.is-granted) .paper-redact-hint{display:block;}

    /* ABOUT */
    .about-wrap{padding:22px 22px 40px;}
    .about-content{max-width:660px;margin-top:18px;}
    .about-section{margin-bottom:38px;}
    .about-overline{
      font-family:'IBM Plex Mono',monospace;
      font-size:9px;
      font-weight:300;
      letter-spacing:0.22em;
      text-transform:uppercase;
      color:var(--ink-ghost);
      margin-bottom:14px;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .about-overline::after{content:'';flex:1;height:1px;background:var(--border);}
    .about-title{
      font-family:'Spectral',serif;
      font-size:22px;
      font-weight:300;
      letter-spacing:-0.02em;
      color:var(--ink);
      margin-bottom:14px;
      line-height:1.18;
    }
    .about-body{
      font-size:14px;
      line-height:1.82;
      color:var(--ink-mid);
      font-weight:300;
      max-width:60ch;
    }
    .about-body + .about-body{margin-top:12px;}
    .about-rule{height:1px;background:var(--border);margin:30px 0;}
    .about-step{display:flex;align-items:flex-start;gap:13px;margin-bottom:13px;}
    .about-step-num{
      font-family:'IBM Plex Mono',monospace;
      font-size:10px;
      font-weight:400;
      color:var(--ink-dim);
      width:20px;height:20px;
      border-radius:50%;
      border:1px solid var(--border-mid);
      display:grid;
      place-items:center;
      flex-shrink:0;
      margin-top:1px;
    }
    .about-step-text{
      font-size:13.5px;
      line-height:1.72;
      color:var(--ink-mid);
      font-weight:300;
    }

    .footer{
      display:flex;
      justify-content:space-between;
      padding:3px 2px;
      font-family:'IBM Plex Mono',monospace;
      font-size:9px;
      font-weight:300;
      letter-spacing:0.12em;
      text-transform:uppercase;
      color:var(--ink-ghost);
    }

    @media (max-width:860px){
      .landing-wrap{grid-template-columns:1fr;}
      .files{grid-template-columns:repeat(10,minmax(0,1fr));}
    }
    @media (max-width:580px){
      .top-bar{flex-direction:column;align-items:flex-start;}
      .request-card-body{flex-direction:column;align-items:flex-start;gap:12px;}
      .req-divider{width:36px;height:1px;}
      .req-input-wrap{width:100%;}
      .req-input{width:100%;}
      .paper-inner{padding:20px 18px 28px;}
      .doc-header{padding-right:60px;}
      .files{grid-template-columns:repeat(8,minmax(0,1fr));grid-auto-rows:34px;}
    }
  </style>
</head>

<body>
<div class="stage">
  <div class="topline">
    <span class="topline-title">Public Archive</span>
    <span class="topline-right" id="globalStatus">Archive</span>
  </div>

  <div class="center">
    <div class="window" id="window">
      <div class="chrome">
        <div class="dots">
          <button class="dotbtn red" id="btnClose" title="Close"></button>
          <button class="dotbtn yellow" id="btnMin" title="Minimize"></button>
          <button class="dotbtn green" id="btnFull" title="Fullscreen"></button>
        </div>
        <div class="url-bar" id="urlBar">archive</div>
        <div class="chrome-right">
          <a class="icon-btn" href="#about" title="About">i</a>
        </div>
      </div>

      <div class="content" id="content">

        <section id="landing">
          <div class="landing-wrap">
            <div class="landing-left">
              <div class="landing-hero">
                <div>
                  <div class="landing-overline">Archive Interface · Public Record</div>
                  <div class="landing-title">Public<br/>Archive</div>
                  <p class="landing-body">
                    Three legal texts staged as a permission system. Access is procedural. The page behaves like the thing it cites.
                  </p>
                </div>
                <div class="landing-meta">
                  <div class="landing-meta-row"><span>Records</span><span>—</span><span>3 texts</span></div>
                  <div class="landing-meta-row"><span>Access</span><span>—</span><span>Request-gated</span></div>
                  <div class="landing-meta-row"><span>Reading</span><span>—</span><span>Non-linear</span></div>
                </div>
              </div>

              <div class="index-list">
                <div class="index-list-head">Records — select to open</div>
                <a class="index-row" href="#record" data-idx="0">
                  <span class="index-row-id">A</span>
                  <span class="index-row-body">
                    <span class="index-row-title">Right of access by the data subject</span>
                    <span class="index-row-meta">Regulation (EU) 2016/679 · Article 15</span>
                  </span>
                  <span class="index-row-arrow">→</span>
                </a>
                <a class="index-row" href="#record" data-idx="1">
                  <span class="index-row-id">B</span>
                  <span class="index-row-body">
                    <span class="index-row-title">Freedom of Information Act</span>
                    <span class="index-row-meta">5 U.S.C. § 552</span>
                  </span>
                  <span class="index-row-arrow">→</span>
                </a>
                <a class="index-row" href="#record" data-idx="2">
                  <span class="index-row-id">C</span>
                  <span class="index-row-body">
                    <span class="index-row-title">Consumer right to know and access</span>
                    <span class="index-row-meta">Cal. Civ. Code § 1798.100</span>
                  </span>
                  <span class="index-row-arrow">→</span>
                </a>
              </div>
            </div>

            <div class="file-panel">
              <div class="file-panel-bar">
                <span>File Field</span>
                <span>72 items</span>
              </div>
              <div class="file-field">
                <div class="files" id="filesGrid" aria-label="File grid"></div>
              </div>
              <div class="file-panel-footer">
                <span>Click any file to open a record</span>
                <span id="visitedCount">0 opened</span>
              </div>
            </div>
          </div>
        </section>

        <section id="record">
          <div class="record-wrap">
            <div class="top-bar">
              <div class="top-bar-left">
                <a class="nav-btn" href="#landing">← Back</a>
                <div class="record-tabs">
                  <button class="record-tab active" data-idx="0">A</button>
                  <button class="record-tab" data-idx="1">B</button>
                  <button class="record-tab" data-idx="2">C</button>
                </div>
              </div>
            </div>

            <div class="request-section" id="requestSection">
              <div class="request-card">
                <div class="request-card-head">
                  <span class="request-card-title">Access Request</span>
                  <span class="request-hint">Submit to enable reveal interactions</span>
                </div>
                <div class="request-card-body">
                  <div class="req-step">
                    <div class="req-step-num" id="step1Num">1</div>
                    <div class="req-check-wrap">
                      <input type="checkbox" id="ackBox" />
                      <label class="req-check-label" for="ackBox">Acknowledge</label>
                    </div>
                  </div>

                  <div class="req-divider"></div>

                  <div class="req-step">
                    <div class="req-step-num" id="step2Num">2</div>
                    <div class="req-input-wrap">
                      <input class="req-input" id="phraseInput" type="text"
                             autocomplete="off" spellcheck="false"
                             placeholder="type: REQUEST ACCESS" />
                    </div>
                  </div>

                  <div class="req-divider"></div>

                  <div class="req-step">
                    <div class="req-step-num" id="step3Num">3</div>
                    <button class="req-submit" id="submitBtn" disabled>Submit →</button>
                  </div>
                </div>
              </div>
            </div>

            <div class="status-line" id="statusLine">
              <div class="status-dot" id="statusDot"></div>
              <span class="status-msg" id="statusMsg">Complete the request form above</span>
            </div>

            <div class="paper" id="paper">
              <input class="fold-toggle" type="checkbox" id="fullAccess" />
              <label class="page-fold" for="fullAccess" title="Fold corner to override all redactions"></label>

              <div class="paper-inner">
                <div class="paper-stamp" id="paperStamp">Pending</div>

                <div class="doc-header">
                  <div class="doc-kicker" id="docKicker">Record</div>
                  <h2 class="doc-title" id="docTitle">—</h2>
                  <p class="doc-subtitle" id="docSubtitle"></p>
                </div>

                <article class="doc" id="docBody">
                  <p>Select a record.</p>
                </article>

                <div class="source-row" id="sourceRow" style="display:none">
                  <div class="source-label">Source</div>
                  <a class="source-link" id="sourceLink" href="#" target="_blank" rel="noopener noreferrer">—</a>
                </div>

                <div class="paper-redact-hint" id="redactHint">
                  ▓ click-to-reveal (submit first) · fold corner overrides
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- ABOUT -->
        <section id="about">
          <div class="about-wrap">
            <div class="top-bar" style="max-width:700px;">
              <a class="nav-btn" href="#landing">← Back</a>
            </div>

            <div class="about-content">
              <div class="about-section">
                <div class="about-overline">About</div>
                <div class="about-title">Public Archive</div>
                <p class="about-body">
                  Three official legal texts presented as an interface. The black bars are the reading logic.
                </p>
                <p class="about-body">
                  Submitting the request enables interaction. Each reveal forces other parts to re-close, so the page never holds the full text at once.
                </p>
              </div>

              <div class="about-rule"></div>

              <div class="about-section">
                <div class="about-overline">How to Read</div>
                <div class="about-step">
                  <div class="about-step-num">1</div>
                  <div class="about-step-text">Submit the request to enable reveal interactions.</div>
                </div>
                <div class="about-step">
                  <div class="about-step-num">2</div>
                  <div class="about-step-text">Click any black bar to reveal it. Other revealed parts will re-close.</div>
                </div>
                <div class="about-step">
                  <div class="about-step-num">3</div>
                  <div class="about-step-text">Fold the top-right corner to override and reveal everything at once.</div>
                </div>
              </div>
            </div>

          </div>
        </section>

      </div><!-- /content -->
    </div><!-- /window -->
  </div><!-- /center -->

  <div class="footer">
    <span>Public Archive</span>
    <span>3 Records</span>
  </div>
</div>

<script>
(function(){
  'use strict';

  const win           = document.getElementById('window');
  const urlBar        = document.getElementById('urlBar');
  const globalStatus  = document.getElementById('globalStatus');
  const btnClose      = document.getElementById('btnClose');
  const btnMin        = document.getElementById('btnMin');
  const btnFull       = document.getElementById('btnFull');
  const filesGrid     = document.getElementById('filesGrid');
  const visitedCount  = document.getElementById('visitedCount');

  const docKicker     = document.getElementById('docKicker');
  const docTitle      = document.getElementById('docTitle');
  const docSubtitle   = document.getElementById('docSubtitle');
  const docBody       = document.getElementById('docBody');
  const sourceRow     = document.getElementById('sourceRow');
  const sourceLink    = document.getElementById('sourceLink');

  const ackBox        = document.getElementById('ackBox');
  const phraseInput   = document.getElementById('phraseInput');
  const submitBtn     = document.getElementById('submitBtn');

  const statusDot     = document.getElementById('statusDot');
  const statusMsg     = document.getElementById('statusMsg');
  const statusLine    = document.getElementById('statusLine');

  const paperStamp    = document.getElementById('paperStamp');
  const paper         = document.getElementById('paper');
  const foldToggle    = document.getElementById('fullAccess');

  const step1Num      = document.getElementById('step1Num');
  const step2Num      = document.getElementById('step2Num');
  const step3Num      = document.getElementById('step3Num');
  const tabs          = document.querySelectorAll('.record-tab');

  let currentIdx  = 0;
  let granted     = false;
  let processing  = false;
  const PHRASE    = 'REQUEST ACCESS';

  const revealedSet = new Set();
  const REVEAL_BUDGET = 7;
  let ridCounter = 0;

  function esc(s){
    return String(s)
      .replace(/&/g,'&amp;')
      .replace(/</g,'&lt;')
      .replace(/>/g,'&gt;');
  }

  function mulberry32(seed){
    let t = seed >>> 0;
    return function(){
      t += 0x6D2B79F5;
      let r = Math.imul(t ^ (t >>> 15), 1 | t);
      r ^= r + Math.imul(r ^ (r >>> 7), 61 | r);
      return ((r ^ (r >>> 14)) >>> 0) / 4294967296;
    };
  }

  function nextRid(){
    ridCounter += 1;
    return 'r' + ridCounter;
  }

  function R(text){
    const rid = nextRid();
    return `<span class="redact" data-rid="${rid}"><span class="redact-text">${esc(text)}</span></span>`;
  }

  function BR(text){
    const rid = nextRid();
    return `<span class="block-redact" data-rid="${rid}"><span>${esc(text)}</span></span>`;
  }

  const records = [
    {
      kicker:'Record A · Regulation (EU) 2016/679',
      title:'Right of access by the data subject',
      subtitle:'Article 15',
      sourceText:'EUR-Lex (Official Journal) — Regulation (EU) 2016/679',
      sourceUrl:'https://eur-lex.europa.eu/eli/reg/2016/679/oj',
      body:()=>`
        <div class="section-head">Article 15(1)</div>
        <p>The data subject shall have the right to obtain from the controller ${R('confirmation as to whether or not personal data concerning him or her are being processed')}, and, where that is the case, access to the personal data and the following information:</p>
        <p class="hanging">(a) the ${R('purposes of the processing')};</p>
        <p class="hanging">(b) the ${R('categories of personal data concerned')};</p>
        <p class="hanging">(c) the ${R('recipients or categories of recipient')} to whom the personal data have been or will be disclosed, in particular recipients in third countries or ${R('international organisations')};</p>
        <p class="hanging">(d) where possible, the ${R('envisaged period for which the personal data will be stored')}, or, if not possible, the ${R('criteria used to determine that period')}.</p>

        <div class="section-head">Article 15(3)–(4)</div>
        <p>The controller shall provide a copy of the personal data undergoing processing. For any further copies requested by the data subject, the controller may charge a ${R('reasonable fee based on administrative costs')}.</p>
        <p>${BR('Where the data subject makes the request by electronic means, and unless otherwise requested by the data subject, the information shall be provided in a commonly used electronic form.')}</p>
        <p>The right to obtain a copy referred to in paragraph 3 shall not ${R('adversely affect the rights and freedoms of others')}.</p>

        <div class="xref-row">
          <span class="xref-row-label">Cross-ref:</span>
          <a class="xref" href="#record" data-jump="1">B →</a>
          <a class="xref" href="#record" data-jump="2">C →</a>
        </div>`
    },
    {
      kicker:'Record B · United States Code',
      title:'Freedom of Information Act',
      subtitle:'5 U.S.C. § 552 (selected clauses)',
      sourceText:'U.S. DOJ (OIP) — The Freedom of Information Act, 5 U.S.C. § 552',
      sourceUrl:'https://www.justice.gov/oip/freedom-information-act-5-usc-552',
      body:()=>`
        <div class="section-head">§ 552(a)(3)(A)</div>
        <p>Except with respect to the records made available under paragraphs (1) and (2) of this subsection, ${R('each agency, upon any request for records which (i) reasonably describes such records and (ii) is made in accordance with published rules stating the time, place, fees (if any), and procedures to be followed, shall make the records promptly available to any person')}.</p>
        <p>In making any record available to a person under this paragraph, an agency shall provide the record in any form or format requested by the person if the record is ${R('readily reproducible by the agency in that form or format')}.</p>

        <div class="section-head">§ 552(b) (selected exemptions)</div>
        <p class="hanging">(1) ${R('specifically authorized under criteria established by an Executive order to be kept secret in the interest of national defense or foreign policy')};</p>
        <p class="hanging">(3) specifically exempted from disclosure by statute ${R('(other than section 552b of this title)')} … that statute … ${R('establishes particular criteria for withholding or refers to particular types of matters to be withheld')};</p>
        <p class="hanging">(5) ${R('inter-agency or intra-agency memorandums or letters that would not be available by law to a party other than an agency in litigation with the agency')};</p>
        <p class="hanging">(6) … disclosure of which would constitute a ${R('clearly unwarranted invasion of personal privacy')};</p>
        <p>${BR('(8) contained in or related to examination, operating, or condition reports prepared by, on behalf of, or for the use of an agency responsible for the regulation or supervision of financial institutions; or (9) geological and geophysical information and data, including maps, concerning wells.')}</p>

        <div class="xref-row">
          <span class="xref-row-label">Cross-ref:</span>
          <a class="xref" href="#record" data-jump="0">A →</a>
          <a class="xref" href="#record" data-jump="2">C →</a>
        </div>`
    },
    {
      kicker:'Record C · California Civil Code',
      title:'Consumer right to know and access',
      subtitle:'Cal. Civ. Code § 1798.100 (selected clauses)',
      sourceText:'California Legislative Information — Civ. Code § 1798.100',
      sourceUrl:'https://leginfo.legislature.ca.gov/faces/codes_displaySection.xhtml?lawCode=CIV&sectionNum=1798.100.',
      body:()=>`
        <div class="section-head">§ 1798.100</div>
        <p>A consumer shall have the right to request that a business that ${R("collects a consumer’s personal information")} disclose to that consumer the categories and specific pieces of personal information the business has collected.</p>
        <p class="hanging">(1) The ${R('categories of personal information to be collected')} … and whether that information is ${R('sold or shared')}.</p>
        <p class="hanging">(2) If the business collects ${R('sensitive personal information')} … whether that information is sold or shared.</p>
        <p class="hanging">(3) The ${R('length of time the business intends to retain each category of personal information')}, or … the ${R('criteria used to determine such period')}.</p>

        <div class="xref-row">
          <span class="xref-row-label">Cross-ref:</span>
          <a class="xref" href="#record" data-jump="0">A →</a>
          <a class="xref" href="#record" data-jump="1">B →</a>
        </div>`
    }
  ];

  function getVisited(){
    try{ return JSON.parse(localStorage.getItem('auc_v6')||'[]'); } catch(_){ return []; }
  }
  function saveVisited(arr){
    try{ localStorage.setItem('auc_v6', JSON.stringify(arr)); } catch(_){}
  }

  /* FIXED: exact 72 files, stable order, no random empties, no layout drift. */
  function buildFiles(){
    filesGrid.innerHTML = '';
    const v = getVisited();
    const total = 72;

    for(let i=0;i<total;i++){
      const a = document.createElement('a');
      a.className = 'file' + (v.includes(i) ? ' visited' : '');
      a.href = '#record';
      a.setAttribute('aria-label','Open file ' + (i + 1));
      filesGrid.appendChild(a);
    }

    visitedCount.textContent = getVisited().length + ' opened';
  }

  function markVisited(i){
    const arr = getVisited();
    if(!arr.includes(i)) arr.push(i);
    saveVisited(arr);
    const el = filesGrid.children[i];
    if(el) el.classList.add('visited');
    visitedCount.textContent = getVisited().length + ' opened';
  }

  function applyReveal(){
    const folded = foldToggle.checked;

    if(folded){
      document.querySelectorAll('#docBody .redact, #docBody .block-redact')
        .forEach(n => n.classList.add('revealed'));
      paper.classList.add('is-granted');
      paperStamp.textContent = granted ? 'Released' : 'Override';
      paperStamp.className = 'paper-stamp ' + (granted ? 'released' : 'override');
      return;
    }

    if(!granted){
      document.querySelectorAll('#docBody .redact, #docBody .block-redact')
        .forEach(n => n.classList.remove('revealed'));
      paper.classList.remove('is-granted');
      paperStamp.textContent = 'Pending';
      paperStamp.className = 'paper-stamp';
      return;
    }

    const nodes = document.querySelectorAll('#docBody .redact, #docBody .block-redact');
    nodes.forEach(n => {
      const rid = n.getAttribute('data-rid');
      if(rid && revealedSet.has(rid)) n.classList.add('revealed');
      else n.classList.remove('revealed');
    });

    paper.classList.add('is-granted');
    paperStamp.textContent = 'Released';
    paperStamp.className = 'paper-stamp released';
  }

  function clampReveals(keepRid){
    const rng = mulberry32(((Date.now() & 0xffffffff) ^ (currentIdx * 99991)) >>> 0);

    const extras = Array.from(revealedSet).filter(x => x !== keepRid);

    if(revealedSet.size <= REVEAL_BUDGET && extras.length > 0){
      const snap = 2 + Math.floor(rng() * 3); // 2..4
      for(let i=0; i<snap && extras.length; i++){
        const j = Math.floor(rng() * extras.length);
        const pick = extras.splice(j,1)[0];
        revealedSet.delete(pick);
      }
      return;
    }

    while(revealedSet.size > REVEAL_BUDGET){
      const pool = Array.from(revealedSet).filter(x => x !== keepRid);
      if(!pool.length) break;
      const pick = pool[Math.floor(rng() * pool.length)];
      revealedSet.delete(pick);
    }
  }

  function pokeRedaction(node){
    if(foldToggle.checked) return;
    if(!granted) return;

    const rid = node.getAttribute('data-rid');
    if(!rid) return;

    revealedSet.add(rid);
    clampReveals(rid);
    applyReveal();
  }

  function resetRequest(){
    granted = false;
    processing = false;

    revealedSet.clear();
    ridCounter = 0;

    ackBox.checked = false;
    phraseInput.value = '';
    phraseInput.classList.remove('valid');
    submitBtn.disabled = true;
    foldToggle.checked = false;

    step1Num.classList.remove('done');
    step2Num.classList.remove('done');
    step3Num.classList.remove('done');

    statusDot.className = 'status-dot';
    statusLine.className = 'status-line';
    statusMsg.textContent = 'Complete the request form above';
  }

  function loadRecord(idx){
    currentIdx = ((idx % records.length) + records.length) % records.length;
    const r = records[currentIdx];

    resetRequest();

    docKicker.textContent   = r.kicker;
    docTitle.textContent    = r.title;
    docSubtitle.textContent = r.subtitle;

    docBody.innerHTML       = r.body();

    sourceLink.textContent  = r.sourceText;
    sourceLink.href         = r.sourceUrl;
    sourceRow.style.display = '';

    urlBar.textContent       = 'archive / record-' + 'abc'[currentIdx];
    globalStatus.textContent = 'Record ' + 'ABC'[currentIdx];

    tabs.forEach((t,i) => t.classList.toggle('active', i === currentIdx));
    applyReveal();

    location.hash = '#record';
  }

  function refreshSubmit(){
    const phrase = phraseInput.value.trim().toUpperCase().replace(/\s+/g,' ');
    const ackOk  = ackBox.checked;
    const phraseOk = phrase === PHRASE;

    step1Num.classList.toggle('done', ackOk);
    step2Num.classList.toggle('done', phraseOk);
    phraseInput.classList.toggle('valid', phraseOk);

    submitBtn.disabled = !(ackOk && phraseOk && !processing);
    step3Num.classList.toggle('done', ackOk && phraseOk && !processing);
  }

  ackBox.addEventListener('change', refreshSubmit);
  phraseInput.addEventListener('input', refreshSubmit);

  submitBtn.addEventListener('click', () => {
    if(submitBtn.disabled) return;

    processing = true;
    submitBtn.disabled = true;

    statusDot.className = 'status-dot processing';
    statusLine.className = 'status-line processing';
    statusMsg.textContent = 'Request received — processing';

    setTimeout(() => {
      granted = true;
      processing = false;

      statusDot.className  = 'status-dot granted';
      statusLine.className = 'status-line granted';
      statusMsg.textContent = 'Access granted — click bars to reveal';

      step3Num.classList.add('done');

      revealedSet.clear();
      applyReveal();
      refreshSubmit();
    }, 1200);
  });

  foldToggle.addEventListener('change', applyReveal);

  docBody.addEventListener('click', (e) => {
    const target = e.target.closest('.redact, .block-redact');
    if(!target) return;
    e.preventDefault();
    pokeRedaction(target);
  });

  function goLanding(){
    location.hash = '#landing';
    win.classList.remove('is-minimized','is-fullscreen');
    urlBar.textContent = 'archive';
    globalStatus.textContent = 'Archive';
  }
  btnClose.addEventListener('click', goLanding);
  btnMin.addEventListener('click', () => win.classList.toggle('is-minimized'));
  btnFull.addEventListener('click', () => {
    win.classList.toggle('is-fullscreen');
    win.classList.remove('is-minimized');
  });

  filesGrid.addEventListener('click', e => {
    const a = e.target.closest('a.file');
    if(!a) return;
    const i = [...filesGrid.children].indexOf(a);
    if(i < 0) return;

    markVisited(i);
    sessionStorage.setItem('auc_cur', String(i % records.length));
    loadRecord(i % records.length);
  });

  document.addEventListener('click', e => {
    const idxEl = e.target.closest('[data-idx]:not(.record-tab)');
    if(idxEl){
      const idx = parseInt(idxEl.dataset.idx, 10);
      if(Number.isFinite(idx)){
        e.preventDefault();
        sessionStorage.setItem('auc_cur', String(idx));
        loadRecord(idx);
      }
    }
    if(e.target.classList.contains('record-tab')){
      const idx = parseInt(e.target.dataset.idx, 10);
      if(Number.isFinite(idx)){
        sessionStorage.setItem('auc_cur', String(idx));
        loadRecord(idx);
      }
    }
    const xref = e.target.closest('.xref[data-jump]');
    if(xref){
      e.preventDefault();
      const n = parseInt(xref.dataset.jump, 10);
      if(Number.isFinite(n)){
        sessionStorage.setItem('auc_cur', String(n));
        loadRecord(n);
      }
    }
  });

  window.addEventListener('hashchange', () => {
    const h = location.hash;
    if(h === '#record'){
      const s = sessionStorage.getItem('auc_cur');
      loadRecord(s != null ? +s : currentIdx);
      win.classList.remove('is-minimized');
    } else if(h === '#about'){
      urlBar.textContent = 'archive / about';
      globalStatus.textContent = 'About';
    } else {
      goLanding();
    }
  });

  window.addEventListener('keydown', e => {
    if(e.key === 'Escape'){
      if(win.classList.contains('is-fullscreen')) win.classList.remove('is-fullscreen');
      else if(location.hash && location.hash !== '#landing') goLanding();
    }
  });

  buildFiles();

  if(location.hash === '#record'){
    const saved = sessionStorage.getItem('auc_cur');
    loadRecord(saved != null ? +saved : 0);
  } else if(location.hash === '#about'){
    urlBar.textContent = 'archive / about';
    globalStatus.textContent = 'About';
  } else {
    goLanding();
  }
})();
</script>
</body>
</html>

